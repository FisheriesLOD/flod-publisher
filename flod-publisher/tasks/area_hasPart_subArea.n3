@prefix sr:   <http://semanticrepository/publisher/task#> .
@prefix dct:  <http://purl.org/dc/terms/> . 
@prefix skos: <http://www.w3.org/2004/02/skos/core#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>


<sr:area_haspart_subarea>     a sr:Task ;

rdfs:label                   "publish HAS PART relationship among Statistical AREA and SubArea";

dct:creator                  <http://semanticrepository/people/claudio.baldassarre> ;
skos:editorialNote           "Generated by the Semantic Repository LOD maintenance framework" ;

sr:source_endpoint           <http://168.202.3.223:3030/sr_staging/query> ;

sr:source_graph              <http://semanticrepository/staging/graph/1.0/area_haspart_subarea> ;

sr:publication_endpoint      <http://168.202.3.223:3030/sr_public/update> ;

sr:target_graph              <http://semanticrepository/public/graph/area_haspart_subarea> ;

sr:depending_graph           <http://semanticrepository/public/graph/CL_SUB_AREA> ;
sr:depending_graph           <http://semanticrepository/public/graph/CL_FAO_MAJOR_AREA> ;

sr:operation                 sr:publish;

#sr:diff_query """ """;

sr:query     """
  PREFIX  pof: <http://www.ontologydesignpatterns.org/cp/owl/partof.owl#>
   
  CONSTRUCT 
    { ?sourceUri pof:hasPart ?targetUri . ?targetUri pof:isPartOf ?sourceUri}
 WHERE
   { ?mapping    <s:r/SourceElement>         ?sourceE       .
     ?sourceE    <s:r/ElementIdentifier>     ?sourceE_id    .
     ?sourceE_id <s:r/elementId>             ?sId           .
     ?mapping    <s:r/TargetElementMappings> ?targetM       .
     ?targetM    <s:r/MappingDetail>         ?detail        .
     ?detail     <s:r/TargetElement>         ?targetE       .
     ?targetE    <s:r/ElementIdentifier>     ?targetT_id    .
     ?targetT_id <s:r/elementId>             ?tId
     BIND(IRI(?sId) as ?sourceUri)
     BIND(IRI(?tId) as ?targetUri)
     }""";
.

