@prefix sr:   <http://semanticrepository/publisher/task#> .
@prefix dct:  <http://purl.org/dc/terms/> . 
@prefix skos: <http://www.w3.org/2004/02/skos/core#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>


<sr:comet_mapping>         a sr:Task ;

rdfs:label                   "publish comet mapping";

dct:creator                  <http://semanticrepository/people/claudio.baldassarre> ;
skos:editorialNote           "Generated by the Semantic Repository LOD maintenance framework" ;

sr:source_endpoint           <http://168.202.3.223:3030/sr_staging/query> ;

sr:source_graph              <http://semanticrepository/staging/graph/0.01/comet_mapping> ;

sr:publication_endpoint      <http://168.202.3.223:3030/sr_public/update> ;

sr:target_graph              <http://semanticrepository/public/graph/0.01/comet_mapping> ;

sr:depending_graph           <http://semanticrepository/public/graph/1.1/fis_subarea> ;
sr:depending_graph           <http://semanticrepository/public/graph/1.1/fis_area> ;

sr:operation                 sr:publish;

#sr:diff_query """ """;

sr:query     """
  PREFIX  skos: <http://www.w3.org/2004/02/skos/core#>
   
  CONSTRUCT 
    { ?sourceT skos:closeMatch ?targetT . ?targetT skos:closeMatch ?sourceT}
 WHERE
   { ?mapping <s:r/SourceElement> ?sourceE .
     ?sourceE <s:r/term> ?sourceT .
     ?mapping <s:r/TargetElementMappings> ?targetM .
     ?targetM <s:r/MappingDetail> ?detail .
     ?detail <s:r/score> ?score .
     ?detail <s:r/TargetElement> ?targetE .
     ?targetE <s:r/term> ?targetT .
     filter (str(?score) > '0.5')
     }""";
.

